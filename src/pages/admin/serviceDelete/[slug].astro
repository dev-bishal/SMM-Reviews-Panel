---

export const prerender = true;
export async function getStaticPaths (){

const allServicesFetch:any = await fetch(Astro.site + "api/services.json")
const allServiceRes = await allServicesFetch.json();

return allServiceRes.map((service:any) => (
    {
        params : { slug: service.id },
        props: { service },
    }
))
} ;
const { slug } = Astro.params;

const deletePanel :any = await fetch(Astro.site + "api/services/" + slug , {
    method: "DELETE"
});
let message;
if(deletePanel) message = "Delete Successful";
else message = "Delete Unsuccessful";

Astro.cookies.set("servicePanelID", slug , {path : "/admin" });
Astro.cookies.set("servicePanelMessage", message , {path : "/admin" });
return Astro.redirect("/admin/services");
---