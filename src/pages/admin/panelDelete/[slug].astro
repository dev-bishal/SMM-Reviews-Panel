---

export const prerender = true;
export async function getStaticPaths (){

const allPanelsFetch:any = await fetch(Astro.site + "api/panels.json");
const allPanelRes = await allPanelsFetch.json();

return allPanelRes.map((panel:any) => (
    {
        params : { slug: panel.id },
        props: { panel },
    }
))
} ;
const { slug } = Astro.params;

const deletePanel :any = await fetch(Astro.site + "api/panels/" + slug , {
    method: "DELETE"
});
let message;
if(deletePanel) message = "Delete Successful";
else message = "Delete Unsuccessful";

Astro.cookies.set("deletePanelID", slug , {path : "/admin" });
Astro.cookies.set("deletePanelMessage", message , {path : "/admin" });
return Astro.redirect("/admin/SMMPanel");
---